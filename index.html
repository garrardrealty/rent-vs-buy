<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rent vs Buy Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
            max-width: 900px;
            margin: auto;
        }
        h2, h3, h4 {
            color: #333;
        }
        label, input {
            display: block;
            margin: 8px 0;
        }
        .results {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        canvas {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h2>Rent vs Buy Calculator</h2>

    <label>Home Purchase Price: <input type="number" id="homePrice" /></label>
    <label>Down Payment (%): <input type="number" id="downPayment" /></label>
    <label>Loan Interest Rate (% per year): <input type="number" id="interestRate" /></label>
    <label>Loan Term (years): <input type="number" id="loanTerm" /></label>
    <label>Property Taxes (% per year): <input type="number" id="propertyTaxes" /></label>
    <label>Annual Insurance Cost: <input type="number" id="insurance" /></label>
    <label>Annual Home Appreciation (%): <input type="number" id="growthRate" /></label>
    <label>Monthly Rent: <input type="number" id="monthlyRent" value="1600" /></label>
    <label>Annual Rent Increase (%): <input type="number" id="rentIncrease" /></label>
    <label>Number of Years: <input type="number" id="years" /></label>

    <button onclick="calculate()">Calculate</button>

    <div class="results" id="results"></div>

    <canvas id="myChart" width="400" height="200"></canvas>

    <script>
        let chartInstance = null;

        function calculate() {
            const getValue = (id) => parseFloat(document.getElementById(id).value) || 0;

            const homePrice = getValue('homePrice');
            const downPaymentPercent = getValue('downPayment');
            const interestRateMonthly = getValue('interestRate') / 100 / 12;
            const loanTermMonths = getValue('loanTerm') * 12;
            const propertyTaxesPercent = getValue('propertyTaxes') / 100;
            const insurance = getValue('insurance');
            const growthRate = getValue('growthRate') / 100;
            let monthlyRent = getValue('monthlyRent');
            const rentIncrease = getValue('rentIncrease') / 100;
            const years = getValue('years');

            if (!homePrice || !loanTermMonths || !years) {
                document.getElementById('results').innerHTML = "<strong>Please fill in all values to calculate.</strong>";
                return;
            }

            const downPayment = homePrice * (downPaymentPercent / 100);
            const loanAmount = homePrice - downPayment;
            const monthlyTaxes = (homePrice * propertyTaxesPercent) / 12;
            const monthlyInsurance = insurance / 12;
            const monthlyPITI = loanAmount * interestRateMonthly * Math.pow(1 + interestRateMonthly, loanTermMonths) / (Math.pow(1 + interestRateMonthly, loanTermMonths) - 1) + monthlyTaxes + monthlyInsurance;

            // Rent Calculation
            let totalRentCost = 0;
            let rentArray = [];
            let yearsArray = [];
            let homeWorthArray = [];
            let investmentArray = [];
            let homeWorthNow = homePrice;

            for (let i = 0; i < years; i++) {
                totalRentCost += monthlyRent * 12;
                homeWorthNow *= (1 + growthRate);
                const investmentGrowth = downPayment * Math.pow(1 + 0.05, i + 1); // Assume 5% annual return on investment

                rentArray.push(totalRentCost.toFixed(2));
                homeWorthArray.push(homeWorthNow.toFixed(2));
                investmentArray.push(investmentGrowth.toFixed(2));
                yearsArray.push(i + 1);

                monthlyRent *= (1 + rentIncrease);
            }

            const homeValueIncrease = homeWorthNow - homePrice;

            // Selling the Home
            const monthlyPrincipalAndInterest = monthlyPITI - monthlyTaxes - monthlyInsurance;
            const numberOfPaymentsMade = years * 12;

            const remainingLoanBalance = loanAmount * Math.pow(1 + interestRateMonthly, loanTermMonths) - (monthlyPrincipalAndInterest * (Math.pow(1 + interestRateMonthly, loanTermMonths) - Math.pow(1 + interestRateMonthly, numberOfPaymentsMade)) / interestRateMonthly);

            const sellingCosts = homeWorthNow * 0.07; // Assuming 7% selling costs
            const moneyInPocketAfterSelling = homeWorthNow - remainingLoanBalance - sellingCosts;

            const investmentGrowthFinal = downPayment * Math.pow(1 + 0.05, years); // Final investment growth
            const netRentLossAfterInvestment = totalRentCost - investmentGrowthFinal;
            const rentVsBuyDifference = moneyInPocketAfterSelling - netRentLossAfterInvestment;

            // Display Results
            document.getElementById('results').innerHTML = `
                <h3>üè† Buying vs Renting Summary</h3>
                <p><strong>Monthly Mortgage (incl. taxes & insurance):</strong> $${monthlyPITI.toFixed(2)}</p>
                <p><strong>Monthly Rent:</strong> $1,600</p>

                <h4>üìä Over ${years} Years:</h4>
                <p><strong>Total Rent Paid:</strong> $${totalRentCost.toFixed(2)}</p>
                <p><strong>Purchase Price:</strong> $${homePrice.toFixed(2)}</p>
                <p><strong>Home Worth After ${years} Years:</strong> $${homeWorthNow.toFixed(2)}</p>
                <p><strong>Home Value Increase:</strong> $${homeValueIncrease.toFixed(2)}</p>

                <h4>üí∞ Selling & Proceeds:</h4>
                <p><strong>Money in Pocket After Selling:</strong> $${moneyInPocketAfterSelling.toFixed(2)}</p>

                <h4>üè† Renting Summary:</h4>
                <p><strong>Total Rent Paid (Lost):</strong> $${totalRentCost.toFixed(2)}</p>
                <p><strong>If You Had Invested Instead:</strong> $${investmentGrowthFinal.toFixed(2)}</p>
                <p><strong>Net Rent Loss After Investment:</strong> $${netRentLossAfterInvestment.toFixed(2)}</p>

                <h4>üìà Difference (Rent - Buy): $${rentVsBuyDifference.toFixed(2)}</h4>
            `;

            // Chart
            if (chartInstance) {
                chartInstance.destroy();
            }

            const ctx = document.getElementById('myChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: yearsArray,
                    datasets: [
                        {
                            label: 'Total Rent Paid',
                            data: rentArray,
                            borderColor: 'blue',
                            fill: false
                        },
                        {
                            label: 'Home Worth',
                            data: homeWorthArray,
                            borderColor: 'green',
                            fill: false
                        },
                        {
                            label: 'Investment Growth',
                            data: investmentArray,
                            borderColor: 'orange',
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: 'Rent vs Buy Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }
    </script>

</body>
</html>













